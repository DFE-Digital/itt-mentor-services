name: Deploy to AKS cluster

on:
  push:
    branches:
      - 1717-ittms-manual-deployment-workflow-bug-fix-1

env:
  ENVIRONMENT: review

jobs:
  deploy:
    name: Review Deployment
    concurrency: deploy_all
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4


      - name: Slack Notification
        if: ${{ failure() && env.ENVIRONMENT != 'review' }}
        uses: rtCamp/action-slack-notify@master
        env:
          SLACK_COLOR: failure
          SLACK_TITLE: Failure deploying release to review
          SLACK_MESSAGE: Failure deploying release to review - Docker tag ${{ github.event.inputs.sha }}
          SLACK_WEBHOOK: ${{ steps.keyvault-yaml-secret.outputs.SLACK_WEBHOOK }}
