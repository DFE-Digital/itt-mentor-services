<%= render "claims/support/primary_navigation", current: :claims %>
<%= content_for :page_title, t(".heading", count: @pagy.count) %>

<div class="govuk-width-container">
  <h1 class="govuk-heading-l"><%= t(".heading", count: @pagy.count) %></h1>

  <%= govuk_button_to(t(".download_csv"), download_csv_claims_support_claims_path, method: :get) %>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-one-third">
      <div class="app-filter">
        <div class="app-filter__header">
          <div class="govuk-heading-m">Filter</div>
        </div>
      </div>
    </div>

    <div class="govuk-grid-column-two-thirds">
      <%= render partial: "shared/search_form", locals: {
        url: claims_support_claims_path,
        label: { text: t(".search_label"), size: "s" },
        name: :search,
        clear_search_url: claims_support_claims_path,
      } %>

      <div class="govuk-section-break govuk-section-break--m govuk-section-break--visible"></div>

      <% if @claims.any? %>
        <div class="govuk-!-margin-bottom-2">
          <% @claims.each do |claim| %>
            <%= render Claim::CardComponent.new(claim:) %>
          <% end %>
        </div>

        <%= govuk_pagination(pagy: @pagy) %>

        <p>
          <%= t("pagination_info", from: @pagy.from, to: @pagy.to, count: @pagy.count) %>
        </p>
      <% else %>
        <p>
          <%= t("no_records", records: "claims") %>
        </p>
      <% end %>
    </div>
  </div>
</div>
