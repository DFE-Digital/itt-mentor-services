<%= render "claims/support/primary_navigation", current: :claims %>
<%= content_for :page_title, t(".heading") %>

<%= content_for(:before_content) do %>
  <%= govuk_back_link(href: claims_support_payments_path) %>
<% end %>

<div class="govuk-width-container" data-controller="filter">
  <span class="govuk-caption-l"><%= t(".caption") %></span>
  <h1 class="govuk-heading-l"><%= t(".heading") %></h1>

  <%= app_table do |table| %>
    <% table.with_head do |head| %>
      <% head.with_row do |row| %>
        <% row.with_cell header: true, text: "Date" %>
        <% row.with_cell header: true, text: "Sent by" %>
        <% row.with_cell header: true, text: "Actions" %>
      <% end %>
    <% end %>

    <% table.with_body do |body| %>
      <% @payments.each do |payment| %>
        <% body.with_row do |row| %>
          <% row.with_cell text: l(payment.created_at, format: :long) %>
          <% row.with_cell text: payment.sent_by.full_name %>
          <% row.with_cell text: govuk_link_to(t(".links.view_claims", count: payment.claim_ids.length), claims_support_claims_path(payment_id: payment.id)) %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>

  <h2 class="govuk-heading-m"><%= t(".sub_heading") %></h2>

  <%= govuk_list type: :number do |list| %>
    <% t(".steps").each do |step| %>
      <%= tag.li step %>
    <% end %>
  <% end %>

  <p class="govuk-body">
    <%= govuk_link_to t(".links.all_claims"), claims_support_claims_path %>
  </p>
</div>
