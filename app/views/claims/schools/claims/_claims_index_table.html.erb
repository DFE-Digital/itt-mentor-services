<%# locals: (claims:) -%>

<%= app_table do |table| %>
  <% table.with_caption(size: "m", text: t(".table.caption")) %>
  <% table.with_head do |head| %>
    <% head.with_row do |row| %>
      <% row.with_cell(header: true, text: t(".table.headers.reference")) %>
      <% row.with_cell(header: true, text: t(".table.headers.accredited_provider")) %>
      <% row.with_cell(header: true, text: t(".table.headers.mentors")) %>
      <% row.with_cell(header: true, text: t(".table.headers.claim_amount")) %>
      <% row.with_cell(header: true, text: t(".table.headers.submitted_at")) %>
      <% row.with_cell(header: true, text: t(".table.headers.status")) %>
    <% end %>
  <% end %>

  <% table.with_body do |body| %>
    <% claims.each do |claim| %>
      <% body.with_row do |row| %>
        <% row.with_cell(text: govuk_link_to(claim.reference, claims_school_claim_path(id: claim.id))) %>
        <% row.with_cell(text: claim.provider_name) %>
        <% row.with_cell do %>
          <ul class="govuk-list">
            <% claim.mentors.order_by_full_name.each do |mentor| %>
              <li><%= mentor.full_name %></li>
            <% end %>
          </ul>
        <% end %>
        <% row.with_cell(text: humanized_money_with_symbol(claim.amount)) %>
        <% row.with_cell(text: safe_l(claim.submitted_on, format: :long)) %>
        <% row.with_cell(text: render(Claim::StatusTagComponent.new(claim:))) %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
